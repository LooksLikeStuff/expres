document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll('input[name="name"]').forEach(t=>{t.addEventListener("input",function(){this.classList.contains("namedeals")||(this.value=this.value.replace(/[^А-Яа-яЁё\s\-]/g,""))})})});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll("input.maskphone");for(let n=0;n<e.length;n++){const s=e[n];s.addEventListener("input",t),s.addEventListener("focus",t),s.addEventListener("blur",t)}function t(n){const s="+_ (___) ___-__-__";let o=0;const a=this.value.replace(/\D/g,"").replace(/^8/,"7").replace(/^9/,"79");this.value=s.replace(/./g,function(l){return/[_\d]/.test(l)&&o<a.length?a.charAt(o++):o>=a.length?"":l}),n.type==="blur"?this.value.length==2&&(this.value=""):this.setSelectionRange&&this.setSelectionRange(this.value.length,this.value.length)}});document.addEventListener("DOMContentLoaded",()=>{try{const e=document.querySelectorAll("[data-mask]");e&&e.length>0&&e.forEach(t=>{if(t)switch(t.getAttribute("data-mask")){case"phone":c(t);break;case"date":r(t);break;default:t.style}})}catch(e){console.error("Ошибка при применении масок к элементам:",e)}});function c(e){e&&e.addEventListener("input",function(t){})}function r(e){e&&e.addEventListener("input",function(t){})}document.addEventListener("DOMContentLoaded",()=>{try{setTimeout(()=>{},1e3)}catch(e){console.error("Ошибка при работе с .mask-element:",e)}});const i=document.getElementById("maskElement");i&&(i.style.display="none");document.addEventListener("DOMContentLoaded",function(){setTimeout(function(){setTimeout(function(){const e=document.querySelector(".some-element");e?e.style.display="block":console.log("Элемент .some-element не найден")},100)},100)});document.addEventListener("DOMContentLoaded",function(){setTimeout(function(){const e=document.querySelector(".some-element");e?e.style.display="block":console.log("Элемент .some-element не найден во втором обработчике")},100)});document.addEventListener("DOMContentLoaded",function(){setTimeout(function(){const e=document.querySelector(".some-element");e?e.style.display="block":console.log("Элемент .some-element не найден в третьем обработчике")},100)});const u=(e,t,n)=>{const s=typeof e=="string"?document.querySelector(e):e;return s&&s.style?(s.style[t]=n,!0):(console.warn(`Элемент ${e} не найден или не имеет свойства style`),!1)};window.safeElementOperation=(e,t,...n)=>{try{const s=typeof e=="string"?document.querySelector(e):e;if(s){if(typeof t=="function")return t(s,...n);if(typeof t=="string"&&s[t])return s[t](...n)}else console.warn(`Элемент ${e} не найден`)}catch(s){console.error(`Ошибка при выполнении операции с элементом ${e}:`,s)}return null};window.safeStyleSet=(e,t)=>window.safeElementOperation(e,n=>n.style?(Object.assign(n.style,t),!0):!1);document.querySelectorAll("[data-style]").forEach(e=>{if(e&&e.dataset&&e.dataset.style)try{const t=JSON.parse(e.dataset.style);Object.keys(t).forEach(n=>{u(e,n,t[n])})}catch(t){console.warn("Ошибка при применении стилей:",t)}});document.addEventListener("DOMContentLoaded",()=>{subscribeToNotifications(),setInterval(fetchNewMessages,1e3)});
