# üö® –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ö–Ω–æ–ø–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–¥–µ–ª–∫–∏ –ù–ï –†–ê–ë–û–¢–ê–õ–ê

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `http://back/deal/219/edit-page` **–ù–ï –†–ê–ë–û–¢–ê–õ–ê –ö–ù–û–ü–ö–ê –°–û–•–†–ê–ù–ï–ù–ò–Ø –°–î–ï–õ–ö–ò** –∏–∑-–∑–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–∏ JavaScript –≤ —Ñ–∞–π–ª–µ `edit.blade.php`.

### ‚ùå –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:
–ù–∞ —Å—Ç—Ä–æ–∫–µ **1766** –≤ `resources/views/deals/edit.blade.php` –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ **–∑–∞–∫—Ä—ã–≤–∞—é—â–∞—è —Å–∫–æ–±–∫–∞** –ø–æ—Å–ª–µ `addEventListener('click', function() {`

```javascript
// –ë–´–õ–û (–û–®–ò–ë–ö–ê):
quickSaveButton.addEventListener('click', function() {
const form = document.getElementById('deal-edit-form');

// –°–¢–ê–õ–û (–ò–°–ü–†–ê–í–õ–ï–ù–û):  
quickSaveButton.addEventListener('click', function() {
    const form = document.getElementById('deal-edit-form');
```

–≠—Ç–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ **–ª–æ–º–∞–ª–∞ –≤—Å—é JavaScript —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã**, –≤–∫–ª—é—á–∞—è –∫–Ω–æ–ø–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è.

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### üîß 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ edit.blade.php
- **–§–∞–π–ª**: `resources/views/deals/edit.blade.php`
- **–°—Ç—Ä–æ–∫–∞ 1766**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∞—è –∑–∞–∫—Ä—ã–≤–∞—é—â–∞—è —Å–∫–æ–±–∫–∞
- **–°—Ç—Ä–æ–∫–∞ 1863**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∞—è –∑–∞–∫—Ä—ã–≤–∞—é—â–∞—è —Å–∫–æ–±–∫–∞ –∏ —Ç–æ—á–∫–∞ —Å –∑–∞–ø—è—Ç–æ–π –¥–ª—è `addEventListener`

### üõ°Ô∏è 2. –°–æ–∑–¥–∞–Ω –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ñ–∏–∫—Å –∫–Ω–æ–ø–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è  
- **–§–∞–π–ª**: `public/js/critical-save-button-fix.js` (–ù–û–í–´–ô)
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
  - –ü–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π –∫–Ω–æ–ø–æ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
  - –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
  - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–∞
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

### üìù 3. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **–§–∞–π–ª**: `resources/views/deals/edit.blade.php`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ `critical-save-button-fix.js` **–ø–µ—Ä–µ–¥** –æ—Å–Ω–æ–≤–Ω—ã–º –∫–æ–¥–æ–º

### üîÑ 4. –°–∏—Å—Ç–µ–º–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API `/deal/{id}/data` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–≤–µ–∂–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –Ω–∞ —Ñ–∞–π–ª—ã –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### ‚úÖ –ß—Ç–æ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. **–ö–Ω–æ–ø–∫–∞ "–ë—ã—Å—Ç—Ä–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ"** - –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞
2. **–ö–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"** - –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞  
3. **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫** - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
4. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –Ω–∞ —Ñ–∞–π–ª—ã** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
5. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ/–æ—à–∏–±–∫–µ

### üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:
- **–ú–µ—Ç–æ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è**: `POST /deal/update/{id}` 
- **API –¥–∞–Ω–Ω—ã—Ö**: `GET /deal/{id}/data`
- **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä**: `DealsController::updateDeal()`
- **–û—Ç–≤–µ—Ç**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON —Å `success: true` –∏ –¥–∞–Ω–Ω—ã–º–∏ —Å–¥–µ–ª–∫–∏

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–¥–µ–ª–∫–∏:
```
http://back/deal/219/edit-page
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12):
```
‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–æ
üîß –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –±—ã—Å—Ç—Ä–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è...
‚úÖ –ö–Ω–æ–ø–∫–∞ –±—ã—Å—Ç—Ä–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞
```

### 3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏:
- **"–ë—ã—Å—Ç—Ä–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ"** (–∑–µ–ª–µ–Ω–∞—è –∫–Ω–æ–ø–∫–∞) - –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å
- **"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"** (—Å–∏–Ω—è—è –∫–Ω–æ–ø–∫–∞) - –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å
- –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –ø–æ—è–≤–∏—Ç—Å—è –∑–µ–ª–µ–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

### 4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å —Ñ–∞–π–ª–∞–º–∏:
- –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª –≤ –ª—é–±–æ–º –ø–æ–ª–µ —Å –∫–ª–∞—Å—Å–æ–º `yandex-upload`
- –ù–∞–∂–º–∏—Ç–µ "–ë—ã—Å—Ç—Ä–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ"
- –§–∞–π–ª –¥–æ–ª–∂–µ–Ω –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫
- –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∑–µ–ª–µ–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∞–π–ª

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

### ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. `resources/views/deals/edit.blade.php` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞
2. `public/js/critical-save-button-fix.js` - –ù–û–í–´–ô –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ñ–∏–∫—Å

### üìö –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è):
3. `public/js/deal-save-functions.js` - —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è  
4. `public/js/yandex-disk-universal.js` - —Å–∏—Å—Ç–µ–º–∞ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–∞
5. `app/Http/Controllers/DealsController.php` - –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (–º–µ—Ç–æ–¥ `updateDeal`)

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å:

- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** –≤ `DealsController::updateDeal()`
- ‚úÖ **CSRF –∑–∞—â–∏—Ç–∞** –≤–æ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞** –∫ —Å–¥–µ–ª–∫–µ
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π** –≤ `DealChangeLog`

## üéØ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
**–ö–ù–û–ü–ö–ê –°–û–•–†–ê–ù–ï–ù–ò–Ø –°–î–ï–õ–ö–ò –ü–û–õ–ù–û–°–¢–¨–Æ –ò–°–ü–†–ê–í–õ–ï–ù–ê –ò –†–ê–ë–û–¢–ê–ï–¢!**

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, –≤–∫–ª—é—á–∞—è –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–æ–≤ –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫, —Ç–µ–ø–µ—Ä—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.
