# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ—à–∏–±–æ–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–¥–µ–ª–∫–∏

## üéØ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ field_name –≤ YandexDiskController
**–ü—Ä–æ–±–ª–µ–º–∞:** API –≤–æ–∑–≤—Ä–∞—â–∞–ª 422 –æ—à–∏–±–∫—É –¥–ª—è –ø–æ–ª–µ–π `plan_final` –∏ `screenshot_final`
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –ø–æ–ª—è –≤ –≤–∞–ª–∏–¥–∞—Ü–∏—é:
- `screenshot_final`
- `plan_final`

**–§–∞–π–ª:** `app/Http/Controllers/Api/YandexDiskController.php`

### 2. –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ Select2 –∏ DataTables
**–ü—Ä–æ–±–ª–µ–º–∞:** `$(...).select2 is not a function` –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ DataTables
**–†–µ—à–µ–Ω–∏–µ:** 
- –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Ñ–∞–π–ª `public/js/libraries-loader-fix.js` —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ `ajax_deal_update.blade.php`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### 3. 404 –æ—à–∏–±–∫–∏ –¥–ª—è API –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–∞
**–ü—Ä–æ–±–ª–µ–º–∞:** GET –∑–∞–ø—Ä–æ—Å—ã –∫ `/api/yandex-disk/info` –≤–æ–∑–≤—Ä–∞—â–∞–ª–∏ 404
**–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω —Å–ø–∏—Å–æ–∫ –ø–æ–ª–µ–π –≤ —Å–∏—Å—Ç–µ–º–µ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö –ø–æ–ª–µ–π

### 4. –ù–µ–ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–æ–ª–µ–π –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–∞
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—è –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏—Å—å —Å–∏—Å—Ç–µ–º–æ–π
**–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω—ã —Å–ø–∏—Å–∫–∏ –ø–æ–ª–µ–π –≤:
- `checkForYandexFiles()` —Ñ—É–Ω–∫—Ü–∏–∏
- `yandex-unified-link-system.js`
- –§—É–Ω–∫—Ü–∏–∏ `updateFileLinksInDeal()`

## üìã –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –ø–æ–ª–µ–π –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–∞
```javascript
[
    'measurements_file', 'final_project_file', 'work_act',
    'chat_screenshot', 'archicad_file', 'plan_final', 
    'final_collage', 'screenshot_work_1', 'screenshot_work_2', 
    'screenshot_work_3', 'screenshot_final', 'execution_order_file',
    'final_floorplan', 'contract_attachment'
]
```

## üîß –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **app/Http/Controllers/Api/YandexDiskController.php**
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è field_name

2. **public/js/libraries-loader-fix.js** (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)
   - –°–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫ —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

3. **resources/views/deals/edit.blade.php**
   - –ü–æ–¥–∫–ª—é—á–µ–Ω–∞ –Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫

4. **resources/views/deals/partials/components/ajax_deal_update.blade.php**
   - –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
   - –†–∞—Å—à–∏—Ä–µ–Ω —Å–ø–∏—Å–æ–∫ –ø–æ–ª–µ–π –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–∞

5. **public/js/yandex-unified-link-system.js**
   - –£–±—Ä–∞–Ω—ã –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è –∏–∑ —Å–ø–∏—Å–∫–∞

## üß™ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

1. –û—Ç–∫—Ä–æ–π—Ç–µ `http://back/deal/219/edit-page`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ - –æ—à–∏–±–∫–∏ –¥–æ–ª–∂–Ω—ã –∏—Å—á–µ–∑–Ω—É—Ç—å
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã –≤ –ø–æ–ª—è:
   - –ü–ª–∞–Ω–∏—Ä–æ–≤–∫–∞ —Ñ–∏–Ω–∞–ª (plan_final)
   - –°–∫—Ä–∏–Ω—à–æ—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —ç—Ç–∞–ø–∞ (screenshot_final)
   - –õ—é–±—ã–µ –¥—Ä—É–≥–∏–µ –ø–æ–ª—è —Ñ–∞–π–ª–æ–≤
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Select2 –∏ DataTables –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫ JavaScript –≤ –∫–æ–Ω—Å–æ–ª–∏
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ Select2 –≤—ã–ø–∞–¥–∞—é—â–∏—Ö —Å–ø–∏—Å–∫–æ–≤
- –£—Å–ø–µ—à–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫
- –ü–æ—è–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –Ω–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
- –†–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å DataTables –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º –∏ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ —á–∞—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã. –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ fallback - –µ—Å–ª–∏ —Å—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç—É–ø–Ω–∞, –æ–Ω–∞ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞.
